(function(n){n.fn.viewportChecker=function(t){var i={classToAdd:"visible",classToRemove:"invisible",offset:100,repeat:!1,invertBottomOffset:!0,callbackFunction:function(){},scrollHorizontal:!1};n.extend(i,t);var u=this,r={height:n(window).height(),width:n(window).width()},f=navigator.userAgent.toLowerCase().indexOf("webkit")!=-1?"body":"html";return this.checkElements=function(){var t,e;i.scrollHorizontal?(t=n(f).scrollLeft(),e=t+r.width):(t=n(f).scrollTop(),e=t+r.height);u.each(function(){var r=n(this),u={},f={},o,s;(r.data("vp-add-class")&&(f.classToAdd=r.data("vp-add-class")),r.data("vp-remove-class")&&(f.classToRemove=r.data("vp-remove-class")),r.data("vp-offset")&&(f.offset=r.data("vp-offset")),r.data("vp-repeat")&&(f.repeat=r.data("vp-repeat")),r.data("vp-scrollHorizontal")&&(f.scrollHorizontal=r.data("vp-scrollHorizontal")),r.data("vp-invertBottomOffset")&&(f.scrollHorizontal=r.data("vp-invertBottomOffset")),n.extend(u,i),n.extend(u,f),!r.hasClass(u.classToAdd)||u.repeat)&&(o=u.scrollHorizontal?Math.round(r.offset().left)+u.offset:Math.round(r.offset().top)+u.offset,s=u.scrollHorizontal?o+r.width():o+r.height(),u.invertBottomOffset&&(s-=u.offset*2),o<e&&s>t?(r.removeClass(u.classToRemove),r.addClass(u.classToAdd),u.callbackFunction(r,"add")):r.hasClass(u.classToAdd)&&u.repeat&&(r.removeClass(u.classToAdd),u.callbackFunction(r,"remove")))})},n(window).bind("load scroll touchmove MSPointerMove",this.checkElements),n(window).resize(function(){r={height:n(window).height(),width:n(window).width()};u.checkElements()}),this.checkElements(),this}})(jQuery);